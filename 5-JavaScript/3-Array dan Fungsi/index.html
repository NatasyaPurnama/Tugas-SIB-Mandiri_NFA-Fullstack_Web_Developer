<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"/>
    <title>Tugas 3 Array dan Function</title>

    <style>
      body {
        background-color: white;
        font-family: "Poppins", sans-serif;
      }
      .card {
        max-width: 1000px;
        width: 100%;
        padding: 20px;
        border-radius: 10px; 
      }
      .table th {
        text-align: left;
        background-color: #31511e !important;
      }
      .table td {
        vertical-align: middle;
        text-align: left;
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 10px;
        border-bottom: 2px solid #ddd;
      }
      .card {
        margin-top: 50px;
      }
    </style>
  </head>
  <body class="d-flex justify-content-center align-items-center">

    <div class="card shadow p-4 card">
      <div class="my-3">
        <div class="header">
          <h4>Daftar Produk</h4>
          <button class="btn btn-success" style="background-color: #31511e;" onclick="bSubmit()">
            <i class="fas fa-plus"></i> Tambah Produk
          </button>
        </div>

        <div class="card mb-3" id="form" style="display: none; margin-top: -3px;" >
          <div class="card-header d-flex justify-content-between">
            <span>Tambah Produk</span>
            <button class="btn btn-danger btn-sm" onclick="bSubmit()">
              <i class="fas fa-times"></i> Tutup
            </button>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-4">
                <input type="text" id="nama" class="form-control" placeholder="Nama Produk"/>
              </div>
              <div class="col-md-3">
                <input type="number" id="harga" class="form-control" placeholder="Harga"/>
              </div>
              <div class="col-md-3">
                <input type="number" id="stok" class="form-control" placeholder="Stok"/>
              </div>
              <div class="col-md-2">
                <button class="btn btn-primary w-100" onclick="tambahProduk()"> Tambahkan</button>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-between mb-3 mt-3">
          <div>
            <span>Tampilkan </span>
            <select>
              <option>10</option>
              <option>25</option>
              <option>50</option>
            </select>
            <span> entri</span>
          </div>
          <div>
            <input class="form-control" type="text" placeholder="Cari produk..." />
          </div>
        </div>

        <table class="table table-striped" style="overflow: hidden; border-radius:8px">
          <thead class="thead-dark">
            <tr>
              <th>ID</th>
              <th>Nama Produk</th>
              <th>Harga</th>
              <th>Stok</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="table"></tbody>
        </table>
      </div>
    </div>

    <script>
      //array produk
      let produkToko = [
        { id: 1, nama: "Laptop", harga: 7000000, stok: 5 },
        { id: 2, nama: "Mouse", harga: 200000, stok: 10 },
        { id: 3, nama: "Keyboard", harga: 350000, stok: 7 },
      ];

      //fungsi untuk menampilkan produk
      function tampilkanProduk() {
        let isitable = document.getElementById("table");
        isitable.innerHTML = "";
        produkToko.forEach((produk) => {
          let rProduk = `<tr>
                    <td>${produk.id}</td>
                    <td>${produk.nama}</td>
                    <td>Rp ${produk.harga.toLocaleString()}</td>
                    <td>${produk.stok}</td>
                    <td>
                        <button class='btn btn-danger btn-sm' onclick='hapusProduk(${
                          produk.id
                        })'>
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>`;
          isitable.innerHTML += rProduk;
        });
      }

      //fungsi untuk menambahkan produk
      function tambahProduk() {
        let nama = document.getElementById("nama").value;
        let harga = document.getElementById("harga").value;
        let stok = document.getElementById("stok").value;
        if (nama && harga && stok) {
          let idBaru = produkToko.length + 1;
          produkToko.push({
            id: idBaru,
            nama,
            harga: parseInt(harga),
            stok: parseInt(stok),
          });
          tampilkanProduk();
        } else {
          alert("Isi semua kolom!");
        }
      }

      //fungsi untuk menghapus produk
      function hapusProduk(id) {
        let index = produkToko.findIndex((produk) => produk.id == id);
        if (index !== -1) {
          produkToko.splice(index, 1);
          tampilkanProduk();
        }
      }

      //fungsi untuk menampilkan form tambah produk
      function bSubmit() {
        let form = document.getElementById("form");
        form.style.display = form.style.display == "none" ? "block" : "none";
      }

      document.addEventListener("DOMContentLoaded", tampilkanProduk);
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
